function partnersMapStart(){var e=document.getElementById("partners-map"),o=$(e).data("center")||"",t=$(e).data("points")||"",s=[],a=[],i=[],n=[],l=0,r={disableDefaultUI:!0,scrollwheel:!1,zoom:3,center:new google.maps.LatLng(o.lat,o.lng),mapTypeId:google.maps.MapTypeId.ROADMAP},p=new google.maps.Map(e,r);p.setOptions({styles:mapStyles});var c=new google.maps.MarkerImage("img/maps/marker_min_purple.svg",new google.maps.Size(20,30),new google.maps.Point(0,0),new google.maps.Point(10,30));for(l=0;l<t.length;l++)s[l]=new google.maps.LatLng(t[l].lat,t[l].lng),a[l]=new google.maps.Marker({position:s[l],map:p,icon:c,title:t[l].name});for(l=0;l<t.length;l++)i[l]="<div class='infobox'><a class='infobox__close'></a><div class='infobox__text'><div class='infobox__name'>"+t[l].name+"</div><div class='infobox__info'>"+t[l].info+"</div></div></div>";for(l=0;l<t.length;l++)n[l]=new InfoBox({content:i[l],pixelOffset:new google.maps.Size(-23,-44),zIndex:null,closeBoxURL:"",isHidden:!1,visible:!0,enableEventPropagation:!0});for(l=0;l<a.length;l++)!function(e){a[e].addListener("click",function(){p.setZoom(15),p.panTo(this.getPosition()),n[e].open(p,this)})}(l);$(e).on("click",".infobox__close",function(){for(var e=0;e<n.length;e++)n[e].close()});var m=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div");m.appendChild(d),m.appendChild(u),m.index=1,d.className="map-zoom__more",u.className="map-zoom__less",google.maps.event.addDomListener(d,"click",function(){p.setZoom(p.getZoom()+1)}),google.maps.event.addDomListener(u,"click",function(){p.setZoom(p.getZoom()-1)}),p.controls[google.maps.ControlPosition.LEFT_CENTER].push(m),new MarkerClusterer(p,a,{imagePath:"img/maps/m"})}function showroomMapStart(){var e=document.getElementById("showroom-map"),o=$(e).data("point")||"",t={disableDefaultUI:!0,scrollwheel:!1,zoom:12,center:new google.maps.LatLng(o.lat,o.lng),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:mapStyles},s=new google.maps.Map(e,t),a=new google.maps.MarkerImage("img/maps/icon_map.png",new google.maps.Size(64,64),new google.maps.Point(0,0),new google.maps.Point(32,64)),i=(new google.maps.Marker({position:new google.maps.LatLng(o.lat,o.lng),map:s,icon:a,title:o.name}),document.createElement("div")),n=document.createElement("div"),l=document.createElement("div");i.appendChild(n),i.appendChild(l),i.index=1,n.className="map-zoom__more",l.className="map-zoom__less",google.maps.event.addDomListener(n,"click",function(){s.setZoom(s.getZoom()+1)}),google.maps.event.addDomListener(l,"click",function(){s.setZoom(s.getZoom()-1)}),s.controls[google.maps.ControlPosition.LEFT_CENTER].push(i)}function mapStart(){$("#partners-map").length&&partnersMapStart(),$("#showroom-map").length&&showroomMapStart()}var $W=$(window),$D=$(document),$B=$("body"),$HB=$("html, body"),notMobile=!0;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(notMobile=!1);var PAGE={$siteWrapper:$("#site-wrapper"),$secIntro:$("#sec-intro"),$benefitsWrap:$("#benefits-wrap"),$benefitsBack:$("#benefits-back"),$historyWrap:$("#history-wrap"),$historyBack:$("#history-back"),$compareWrap:$("#compare-wrap"),$compareMove:$("#compare-move"),$subscribeWrap:$("#subscribe-wrap"),$subscribeRotate:$("#subscribe-rotate")},google,mapStyles=[{featureType:"all",elementType:"all",stylers:[{hue:"#ffaa00"},{saturation:"-33"},{lightness:"10"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#9c5e18"}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"transit.line",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{saturation:"-23"},{gamma:"2.01"},{color:"#ffffff"}]},{featureType:"water",elementType:"geometry.stroke",stylers:[{saturation:"-14"}]}];$D.ready(function(){function e(){var e=$(this).scrollTop();Math.abs(s-e)<=a||(e>s&&e>n?i.removeClass("nav-down").addClass("nav-up"):e+$W.height()<$D.height()&&i.removeClass("nav-up").addClass("nav-down"),s=e)}var o=0;(function(){var e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",document.body.appendChild(e),o=e.offsetWidth-e.clientWidth,document.body.removeChild(e)})(),$.fn.scrollToTop=function(){var e=$(this);e.hide(),$W.scrollTop()>="150"&&e.fadeIn("slow"),$W.scroll(function(){$W.scrollTop()<="150"?e.fadeOut("slow"):e.fadeIn("slow")}),$(this).click(function(){$HB.velocity("scroll",{offset:0,duration:2e3,easing:"easeOutCubic"})})},$(".js-scroll-top").scrollToTop(),$(".js-scroll-to").click(function(e){var o,t=$(this),s=$(t.attr("href")||t.data("scroll"));return s.length&&(e.preventDefault(),o=s.offset().top-115,$HB.velocity("scroll",{offset:o,duration:2e3,easing:"easeOutCubic"})),!1}),$.fn.rippleEffect=function(e){var o=$(this);e||(e=.8),o.click(function(o){var t,s,a,i,n=$(this);0==n.find(".effect").length&&n.append("<span class='effect'></span>"),(t=n.children(".effect")).removeClass("replay"),t.height()||t.width()||(s=Math.max(n.outerWidth(),n.outerHeight()),t.css({height:s*e,width:s*e})),a=o.pageX-n.offset().left-t.width()/2,i=o.pageY-n.offset().top-t.height()/2,t.css({top:i+"px",left:a+"px"}).addClass("replay")})},$(".btn").rippleEffect(1),$D.on("click",".js-youtube-init",function(){var e,o=$(this),t=o.data("youtube");return!!t&&(e='<iframe class="video-unit__youtube" width="740" height="480" src="https://www.youtube.com/embed/'+t+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>',o.before(e),o.addClass("is-hidden"),this)}),$D.on("click",".js-video-init",function(){var e=$(this),o=e.siblings(".video-unit__local")[0];if(!o)return!1;e.addClass("is-hidden"),o.load(),o.play()});var t,s=0,a=5,i=$("#site-header"),n=i.outerHeight();$(window).scroll(function(){t=!0}),setInterval(function(){t&&(e(),t=!1)},250),$(".js-mobmenu-toggle").click(function(){var e=$(this),o=$("#js-mobmenu"),t=$("#js-mobmodal"),s=$("#site-header");o.hasClass("is-active")?(e.removeClass("is-open"),o.removeClass("is-active"),t.removeClass("is-active"),s.removeClass("is-active")):(e.addClass("is-open"),o.addClass("is-active"),t.addClass("is-active"),s.addClass("is-active"))}),$("#js-mobmodal").click(function(){var e=$(".js-mobmenu-toggle"),o=$("#js-mobmenu"),t=$("#js-mobmodal");e.removeClass("is-open"),o.removeClass("is-active"),t.removeClass("is-active")}),$.mask.definitions.H="[0-2]",$.mask.definitions.h="[1-9]",$.mask.definitions.M="[0-5]",$.mask.definitions.m="[0-9]",$(".js-phone-mask").mask("+7 (999) 999-99-99",{placeholder:"_"}),$(".js-date-mask").mask("99.99.9999",{placeholder:"_"}),$(".js-time-mask").mask("Hh:Mm",{placeholder:"_"}),$(".js-validate").each(function(){$(this).validate({focusInvalid:!1,rules:{name:{required:!0},mail:{required:!0,email:!0},numb:{required:!0},text:{required:!0},login:{required:!0},pass:{required:!0},captcha:{required:!0}},messages:{name:"",mail:"",numb:"",text:"",login:"",pass:"",captcha:""},errorClass:"input-error",highlight:function(e,o){$(e).parent().addClass(o)},unhighlight:function(e,o){$(e).parent().removeClass(o)},submitHandler:function(e){$(e).hasClass("popup-form")&&$(e).hide().siblings(".js-form-ok").show()}})}),$(".js-gallery-slider").slick({arrows:!0,dots:!0,autoplay:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,prevArrow:"<button type='button' class='slick-arrow slick-prev'></button>",nextArrow:"<button type='button' class='slick-arrow slick-next'></button>",customPaging:function(e,o){return'<a class="slick-num" role="button">'+(o+1)+"</a>"},responsive:[{breakpoint:680,settings:{dots:!1}}]}),$(".js-video-set").click(function(){var e=$(this),o=e.data("video"),t=e.data("poster");$("#video-wrap").html('<div class="video-unit__poster js-youtube-init" data-youtube="'+o+'"><img class="video-unit__img" src="'+t+'" alt="Youtube video"><a class="video-unit__start" role="button"></a></div>')}),notMobile&&(PAGE.$compareMove.scroolly([{to:"con-top - 150px = vp-top",css:{top:"0",bottom:"",position:"absolute"}},{from:"con-top - 150px = vp-top",to:"con-bottom - 100el = vp-top + 150px",css:{top:"150px",bottom:"",position:"fixed"}},{from:"con-bottom - 100el = vp-top + 150px",css:{top:"auto",bottom:"0",position:"absolute"}}],PAGE.$compareWrap),PAGE.$subscribeRotate.scroolly([{from:"con-top = vp-bottom",to:"con-bottom = vp-top",cssFrom:{transform:"rotate( 0deg )"},cssTo:{transform:"rotate( 360deg )"}}],PAGE.$subscribeWrap),PAGE.$benefitsBack.scroolly([{from:"con-top + 100px = vp-bottom",to:"con-bottom - 200px = vp-top",cssFrom:{opacity:0},cssTo:{opacity:1}}],PAGE.$benefitsWrap),PAGE.$historyBack.scroolly([{from:"con-top + 100px = vp-bottom",to:"con-bottom - 200px = vp-top",cssFrom:{opacity:0},cssTo:{opacity:1}}],PAGE.$historyWrap))}),$(window).on("load",function(){setTimeout(function(){$(".js-map-here").length>0&&$.getScript("https://maps.google.com/maps/api/js?key=AIzaSyCyMrKbNNC2b6oORYzztov9dMMlFcnK7ps&sensor=false",function(){$.getScript("js/helpers/infobox.js",function(){$.getScript("js/helpers/markerclusterer.js",function(){mapStart()})})})},500)});
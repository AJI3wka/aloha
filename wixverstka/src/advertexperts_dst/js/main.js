$(document).ready(function(){function t(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function e(t){$.ajax({type:"GET",url:t,dataType:"xml",success:function(t){$(t).find("ip").each(function(){var t=$(this).find("city").text(),e=$(this).find("region").text();if(t!=e)n=t+", "+e;else var n=t;$('<input type="hidden" />').attr({name:"location",class:"location",value:n}).appendTo("form")})}})}$('<script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Ada875ff33ada0b8590de86351c01c409b6ff02ec3b3a0c5ca9998de1413acd83&amp;width=100%25&amp;height=350&amp;lang=ru_UA&amp;scroll=true"><\/script>').appendTo(".sec11 .block .map"),$('input[name="name"]').blur(function(){$(this).val().length<2&&$(this).addClass("error-input")}),$('input[name="name"]').focus(function(){$(this).removeClass("error-input")}),$('input[name="phone"]').mask("+7 (999) 999-99-99"),$('input[name="phone"]').blur(function(){18!=$(this).val().length&&$(this).addClass("error-input")}),$('input[name="phone"]').focus(function(){$(this).removeClass("error-input")}),$.get("http://ipinfo.io",function(t){geo_url="http://ipgeobase.ru:7020/geo?ip="+t.ip,e(geo_url)},"jsonp"),utm=[],$.each(["utm_source","utm_medium","utm_campaign","utm_term","source_type","source","position_type","position","added","creative","matchtype"],function(e,n){$('<input type="hidden" />').attr({name:n,class:n,value:function(){return void 0==t(n)?"-":t(n)}}).appendTo("form")}),$('<input type="hidden" />').attr({name:"url",value:document.location.href}).appendTo("form"),$('<input type="hidden" />').attr({name:"title",value:document.title}).appendTo("form"),$("form").submit(function(t){if(t.preventDefault(),$(this).find('input[type="text"]').trigger("blur"),$(this).find('input[type="text"]').hasClass("error-input")){var e="";$(this).find('input[name="name"]').hasClass("error-input")&&!$(this).find('input[name="phone"]').hasClass("error-input")?e="Пожалуйста введите имя":$(this).find('input[name="phone"]').hasClass("error-input")&&!$(this).find('input[name="name"]').hasClass("error-input")?e="Пожалуйста введите телефон":$(this).find('input[name="phone"]').hasClass("error-input")&&$(this).find('input[name="name"]').hasClass("error-input")&&(e="Пожалуйста введите имя и телефон"),$("#form-error-text").html(e),$("#form-error-pop").arcticmodal()}else{var n=$(this).attr("method"),i=$(this).attr("action"),a=$(this).serialize();$(this).find('input[name="event"]').val();$.ajax({type:n,url:i,data:a,success:function(){$.arcticmodal("close"),$("#okgo").arcticmodal()}})}}),$(".pop .close").click(function(){$(this).closest(".pop").arcticmodal("close")})});